---
layout: post
title: 출전 순서 정하기(알고스팟 문제 ID:MATCHORDER)
subtitle: 알고리즘 문제풀이
tags: [개발,알고리즘, 탐욕법, 그리디 알고리즘]
comments: true
---    

## 문제
전세계 최대의 프로그래밍 대회 알고스팟 컵의 결승전이 이틀 앞으로 다가왔습니다. 각 팀은 n명씩의 프로 코더들로 구성되어 있으며, 결승전에서는 각 선수가 한 번씩 출전해 1:1 경기를 벌여 더 많은 승리를 가져가는 팀이 최종적으로 우승하게 됩니다. 각 팀의 감독은 대회 전날, 주최측에 각 선수를 출전시킬 순서를 알려 주어야 합니다.

결승전 이틀 전, 한국팀의 유감독은 첩보를 통해 상대 러시아팀의 출전 순서를 알아냈습니다. 이 대회에서는 각 선수의 실력을 레이팅(rating)으로 표현합니다. 문제를 간단히 하기 위해 1:1 승부에서는 항상 레이팅이 더 높은 선수가 승리하고, 레이팅이 같을 경우 우리 선수가 승리한다고 가정합시다.
경기 	1 	2 	3 	4 	5 	6  
러시아팀 	3,000 	2,700 	2,800 	2,200 	2,500 	1,900  
한국팀 	2,800 	2,750 	2,995 	1,800 	2,600 	2,000  

표와 같이 출전 순서를 정했다고 하면 한국팀은 2번, 3번, 5번, 6번 경기에서 승리해 전체 네 경기를 이기게 됩니다. 그러나 대신 4번 경기와 1번 경기에 나갈 선수를 바꾸면 1번 경기만을 제외하고 모든 경기에 승리할 수 있지요. 상대방 팀 선수들의 순서를 알고 있을 때, 어느 순서대로 선수들을 내보내야 승수를 최대화할 수 있을까요?
## 입력
입력의 첫 줄에는 테스트 케이스의 수 C (C≤50)가 주어집니다. 각 테스트 케이스의 첫 줄에는 각 팀 선수의 수 N(1≤N≤100)가 주어집니다. 그 다음 줄에는 N개의 정수로 러시아팀 각 선수의 레이팅이 출전 순서대로 주어지며, 그 다음 줄에는 N개의 정수로 한국팀 각 선수의 레이팅이 무순으로 주어집니다. 모든 레이팅은 1 이상 4000 이하의 정수입니다.
## 출력
각 테스트 케이스마다 한 줄에 한국팀이 얻을 수 있는 최대 승수를 출력합니다.
## 예제 입력
3  
6  
3000 2700 2800 2200 2500 1900  
2800 2750 2995 1800 2600 2000  
3  
1 2 3  
3 2 1  
4  
2 3 4 5  
1 2 3 4  

## 예제 출력
5  
3  
3  
## 풀이 소스코드  
<script src="https://gist.github.com/overflow218/6f62f14429a6144398df13a0ced02aa3.js"></script>

## 문제 설명
탐욕법(greedy algorithm)의 첫번째 문제이다. 탐욕법이란 현재 상황에서 제일 좋은 답을 뽑고, 그 다음 상황에서 제일 좋은 답을 뽑고, ... 주어진 상황에서 제일 좋은 답을 선택하는 알고리즘 풀이 방법이다. 예를 들면 10개의 사탕이 있는데, 그 사탕의 무게가 각각 다르다. 사탕 5개를 골라서 사탕의 무게 합이 최대가 되도록 하고 싶은 상황일때, 탐욕법은 10개중 제일 무거운 사탕 고르고, 남은 9개중 제일 무거운 사탕 고르고, ... 남은 6개 중에 제일 무거운 사탕을 고르는 방식이다. 이쯤에서 아마 이런 생각이 들 것이다. "그게 전체문제의 최적답이라는 것을 어떻게 알아??" 맞다. 그렇기 때문에 탐욕법을 사용가능한 상황은 지극히 한정되어 있다. 보통 탐욕법을 사용하는 경우는 1. 탐욕법으로 풀어도 항상 최적해를 구할 수 있는 문제를 만난 경우(이경우엔 탐욕법이 동적계획법보다 훨씬 빠르다. 왜? 모든 경우를 해보는 거랑 그때그때 제일 좋은거 뽑고 넘어가는 것의 차이다.) 2. 시간이나 공간의 제약으로 다른 방법으로는 최적해를 찾기 어려울때, 타협할만한 답을 탐욕법을 이용해 구하는 경우이다. 보통은 2번은 다른 알고리즘을 사용해서 구하기때문에, 탐욕법은 주로 1번 경우에 많이 사용된다. 이때 탐욕법으로 풀어도 항상 최적해를 구할 수 있는 문제인지를 판단하는게 아주 중요한 부분이다. 이를 위해 보여야 하는 것은 두가지이다. 1. 탐욕적 선택속성(greedy choice property), 탐욕적으로 골라도 그것이 최적답을 보장하는지를 보여야한다. 2. 최적부분구조, 부분문제에서 최적답을 고르면 전체에서도 최적답이 되는지를 보여야 한다. 아주 중요한 부분이기 때문에 탐욕법으로 문제를 풀때는 항상 탐욕법으로 풀어도 좋은지 정당화하는 과정을 유심히 살펴보도록 하자. 문제마다 다르지만 보통 탐욕적으로 고르지 않은 최적해가 있다고 가정하고, 이를 탐욕적으로 고른 답으로 대체해도 최적해가 유지됨을 보이면 된다. 이제 문제를 풀면서 살펴보자. 직관적으로 드는 생각은 어차피 못이기는 게임은 버리는 게임으로 생각해서 제일 레이팅이 낮은 선수를 내보내고, 이길 수 있는 게임은 상대팀보다 레이팅이 높은 선수들 중에서 가장 낮은 점수를 가진 선수를 내보내야겠다고 생각할 수 있다. 이 직관이 맞는지 한번 검증해보자. 우선 지는 게임인 경우를 생각해보자. 이 경우는 러시아 선수의 레이팅보다 큰 레이팅을 가지는 한국선수가 존재하지 않는 경우이다. 가장 낮은 점수를 가진 한국 선수를 x, 그보다 높은 점수를 가진 한국 선수를 y라고 하자. y가 게임에 나가서 지는 최적해가 있다고 가정하자. 이때 y 대신 x가 출전해도 게임에서 진다는 것은 변하지 않는다. y가 x 자리로 가서 경기를 해도 어차피 x가 졌던 경우면 상관없고, x가 이겼던 경기면 y도 이길 수 있기때문에 승수에 차이가 없다. 즉 최적해가 보존된다. 
다음으로 이기는 게임을 생각해보자. 이길 수 있는 선수중에 가장 레이팅이 낮은 선수를 x, 그보다는 높은 선수를 y라고 하자. y가 게임에 나가는 최적해가 있다고 할때 그 게임을 x가 나가도 승리할 수 있다. y는 x자리에 가서 이길 수도 질 수도 있지만 적어도 최적해보다 승수가 줄어들 일은 없으므로 최적해가 보존된다. 이를 통해 이기는 경우든, 지는 경우든 탐욕적으로 골라도 최적해가 보존됨을 알 수 있다. 이제 최적부분구조를 보이면 되는데 이는 쉽다. 남은 경기에서 최다승을 거두면, 전체에서도 최다승이 되므로 최적부분구조가 성립한다.
## 문제 출처  
<a href="https://www.algospot.com/judge/problem/read/MATCHORDER"> 문제 링크 </a>
