---
layout: post
title: Quantization(알고스팟 문제 ID:quantize)
subtitle: 알고리즘 문제풀이
tags: [개발,알고리즘]
comments: true
---    

## 문제
Quantization (양자화) 과정은, 더 넓은 범위를 갖는 값들을 작은 범위를 갖는 값들로 근사해 표현함으로써 자료를 손실 압축하는 과정을 말한다. 예를 들어 16비트 JPG 파일을 4컬러 GIF 파일로 변환하는 것은 RGB 색 공간의 색들을 4컬러 중의 하나로 양자화하는 것이고, 키가 161, 164, 170, 178 인 학생 넷을 '160대 둘, 170대 둘' 이라고 축약해 표현하는 것 또한 양자화라고 할 수 있다.

1000 이하의 자연수들로 구성된 수열을 최대 S종류 의 값만을 사용하도록 양자화하고 싶다. 이 때 양자화된 숫자는 원래 수열에 없는 숫자일 수도 있다. 양자화를 하는 방법은 여러 가지가 있다. 수열 1 2 3 4 5 6 7 8 9 10 을 2개의 숫자만을 써서 표현하려면, 3 3 3 3 3 7 7 7 7 7 과 같이 할 수도 있고, 1 1 1 1 1 10 10 10 10 10 으로 할 수도 있다. 우리는 이 중, 각 숫자별 오차 제곱의 합을 최소화하는 양자화 결과를 알고 싶다.

예를 들어, 수열 1 2 3 4 5 를 1 1 3 3 3 으로 양자화하면 오차 제곱의 합은 0+1+0+1+4=6 이 되고, 2 2 2 4 4 로 양자화하면 오차 제곱의 합은 1+0+1+0+1=3 이 된다.

수열과 S 가 주어질 때, 가능한 오차 제곱의 합의 최소값을 구하는 프로그램을 작성하시오.
## 입력

입력의 첫 줄에는 테스트 케이스의 수 C (1 <= C <= 50) 가 주어진다. 각 테스트 케이스의 첫 줄에는 수열의 길이 N (1 <= N <= 100), 사용할 숫자의 수 S (1 <= S <= 10) 이 주어진다. 그 다음 줄에 N개의 정수로 수열의 숫자들이 주어진다. 수열의 모든 수는 1000 이하의 자연수이다.

## 출력

각 테스트 케이스마다, 주어진 수열을 최대 S 개의 수로 양자화할 때 오차 제곱의 합의 최소값을 출력한다..

## 예제 입력

2  
10 3  
3 3 3 1 2  3 2 2 2 1  
9 3  
1 744 755 4 897 902 890 6 777    
## 예제 출력
0  
651  

## 풀이 소스코드  
<script src="https://gist.github.com/overflow218/b954e62a251b4bd1a96b23b490131993.js"></script>
## 문제 설명

문제를 처음 보면 이거 뭐지? 하고 벙찌기 쉬운 문제이다. 조금 생각해보면 주어진 수를 적당히 s개의 묶음으로 묶은 뒤, 각 묶음별로 오차제곱의 합을 최소화하는 적절한 수를 찾으면 되겠다는 생각이 든다. 
여기서 문제는 1. 각 묶음별로 몇개의 수를 넣어야 할지 2. 그 묶음의 오차제곱을 최소화하는 적절한 수는 어떻게 찾아야 할지 2가지를 해결해야 한다. 
우선 1번을 생각해보자. 어떤수들을 몇개의 묶음으로 묶어야할지 아무리 생각해도 답이 안나온다. 맞다. 가능한 모든 경우를 해본 뒤, 최소인 경우를 고르는 수 밖에 없다. 
2번을 생각해보자. 우리가 구하려는 x는 아래의 수식이 최소가 되도록 하는 x이다. 이 식을 전개한뒤 x에 대해 미분하면 x가 그 묶음안에 있는 수들의 평균일때 오차제곱이 최소가 된다는 것을 알 수 있다. 
![math](/assets/img/math.png)  
이제 이를 코드로 구현하면 된다. 위의 소스코드를 보면 주어진 수열을 정렬하는 과정이 있다. 이는 직관적으로 봤을때도 주변에 붙어있는 수들끼리 묶어야 오차가 작아지기 때문이기도 하고, 수학적으로 생각해봐도 
a < b 일때 a -> x, b -> y, x > y 로 양자화하는 것보다 a -> y, b -> x로 양자화하는게 무조건 작기 때문에 정렬한뒤 묶어주는게 편하다. 

## 문제 출처  

<a href="https://www.algospot.com/judge/problem/read/QUANTIZE"> 문제 링크 </a>
