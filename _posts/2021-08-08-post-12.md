---
layout: post
title: 우물을 기어오르는 달팽이(알고스팟 문제 ID:SNAIL)
subtitle: 알고리즘 문제풀이
tags: [개발,알고리즘,동적계획법]
comments: true
---    

## 문제
깊이가 n 미터인 우물의 맨 밑바닥에 달팽이가 있습니다. 이 달팽이는 우물의 맨 위까지 기어올라가고 싶어하는데, 달팽이의 움직임은 그 날의 날씨에 좌우됩니다. 만약 비가 내리면 달팽이는 하루에 2미터를 기어올라갈 수 있지만, 날이 맑으면 1미터밖에 올라가지 못합니다.

여름 장마가 찾아와, 앞으로 m 일간 각 날짜에 비가 올 확률이 정확히 75%일 전망입니다. m 일 안에 달팽이가 우물 끝까지 올라갈 확률을 계산하는 프로그램을 작성하세요.
## 입력

입력의 첫 줄에는 테스트 케이스의 수 C(1≤C≤50) 가 주어집니다. 그 후 각 줄에 우물의 깊이 n(1≤n≤1000)과 장마 기간의 길이 m(1≤m≤1000) 이 주어집니다.
## 출력


각 테스트 케이스마다 한 줄에 m일 안에 달팽이가 우물을 탈출할 수 있을 확률을 출력합니다. 10−7 이하의 상대/절대 오차가 있는 답은 정답으로 인정됩니다.

## 예제 입력
4  
5 4  
5 3  
4 2  
3 2  
## 예제 출력
0.9960937500  
0.8437500000  
0.5625000000  
0.9375000000  

## 풀이 소스코드  
<script src="https://gist.github.com/overflow218/49e11fa1835f725d8c4df71d19cf2280.js"></script>

## 문제 설명
처음으로 동적계획법 문제중 확률과 관련된 문제가 나왔다. 동적계획법 자체가 모든 경우의 수를 세는 완전탐색법에서 중복되는 문제들을 좀 더 효율적으로 풀어내기 위해 고안된 방법인 만큼, 경우의 수 및 확률과 연관이 깊다.
문제 자체는 크게 어렵지 않은데, 몇가지 짚고 넘어가야할 부분이 있다.  우선 cache말고 따로 isVisited를 놓아서 해당 함수가 호출된적 있는지 없는지를 따로 검사한 부분이다.
보통은 cache 배열에 정수가 들어가기 때문에 초기화한뒤 처음 나오는지 아닌지 구분하기 쉽다. 하지만 이 문제는 확률을 표현하느라 소수를 넣어주기 때문에, 초기화라든지 값을 비교해주는 부분이 조금은 조심스럽다. 
이럴때는 메모리를 조금 더 쓰더라도 안전하게 따로 불린배열을 만들어서 확인해주는게 좋은것 같다. 두번째로는 함수의 인자로 달팽이가 지금까지 올라온 거리가 아닌, 남은 거리를 넣어준 점이다. 
이게 뭐가 다르냐고 생각할 수 있는데, 올라온 거리를 함수에 넣어주게 되면 테스트케이스마다 cache값이 달라지게 된다. 즉 문제별로 우물의 높이에 따라 x일날까지 y미터 올라왔을때 남은 기간동안 끝까지 올라갈 확률이 매번 달라진다는 것이다.
하지만 남은 거리를 넣어주면 어떤 테스트케이스든 x일 남았고, y 미터 남았을때, 남은 기간안에 끝까지 올라갈 확률은 동일해진다. 문제를 -> 으로 푸냐 <- 로 푸냐 같은 사소한 부분이지만, 두번째 방법을 사용하면 매 테스트 케이스마다 중복되는 부분은 바로 활용할 수 있기 때문에 좀 더 효율적이다.


## 문제 출처  

<a href="https://www.algospot.com/judge/problem/read/SNAIL"> 문제 링크 </a>
